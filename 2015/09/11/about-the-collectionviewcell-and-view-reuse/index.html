<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.3.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="#前言:   在做聊天窗口的时候需要使用collectionView，所以作个demo来学习collectionView的使用。">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="关于collectionViewCell的重用">
<meta property="og:url" content="https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/index.html">
<meta property="og:site_name" content="DeafChen">
<meta property="og:description" content="#前言:   在做聊天窗口的时候需要使用collectionView，所以作个demo来学习collectionView的使用。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_need_effect.png">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_unexpect_effect.png">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_inStoryboard.png">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_first_modify.png">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_need_effect.png">
<meta property="og:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-different_cell_class.png">
<meta property="og:updated_time" content="2016-12-27T14:59:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于collectionViewCell的重用">
<meta name="twitter:description" content="#前言:   在做聊天窗口的时候需要使用collectionView，所以作个demo来学习collectionView的使用。">
<meta name="twitter:image" content="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_need_effect.png">






  <link rel="canonical" href="https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>关于collectionViewCell的重用 | DeafChen</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112744328-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-112744328-1');
</script>



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2250627e2fe66049584e97edac149bb6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DeafChen</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Yesterday once more</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/aboutme/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags<span class="badge">14</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories<span class="badge">8</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives<span class="badge">34</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">
    <a href="/sitemap.xml" rel="section">
      <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />Sitemap</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DeafChen">
      <meta itemprop="description" content="It’s amazing how the unexpected, can take your life and change directions.">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeafChen">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">关于collectionViewCell的重用
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-09-11 20:11:24" itemprop="dateCreated datePublished" datetime="2015-09-11T20:11:24+08:00">2015-09-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2016-12-27 22:59:17" itemprop="dateModified" datetime="2016-12-27T22:59:17+08:00">2016-12-27</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/读书笔记-ReadingNote/" itemprop="url" rel="index"><span itemprop="name">读书笔记(ReadingNote)</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/09/11/about-the-collectionviewcell-and-view-reuse/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2015/09/11/about-the-collectionviewcell-and-view-reuse/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2015/09/11/about-the-collectionviewcell-and-view-reuse/" class="leancloud_visitors" data-flag-title="关于collectionViewCell的重用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>#<code>前言:</code></p>
<blockquote>
<ul>
<li>在做聊天窗口的时候需要使用collectionView，所以作个demo来学习collectionView的使用。</li>
</ul>
</blockquote>
<a id="more"></a>
<p>1.今天为了用collectionView来写一个聊天界面所以去写了一个collectionView的简单demo。    </p>
<p>#出现问题:<br>想要的效果是这样子的：<br><img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_need_effect.png" alt="cell_need_effect"><br>但却出现这样子的效果:(bad effect)<br><img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_unexpect_effect.png" alt="cell_unexpect_effect"></p>
<p>关键代码代码如下:</p>
<pre><code>- (void)viewDidLoad {
    [super viewDidLoad];

    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;testCell&quot;];
}

#pragma mark - UICollectionViewDataSource
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return 13;
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 7;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@&quot;testCell&quot; forIndexPath:indexPath];

    _image = [UIImage imageNamed:@&quot;yes&quot;];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(cell.frame.size.width/4, cell.frame.size.height/4, cell.frame.size.width/2, cell.frame.size.height/2)];

    [imageView setImage:_image];

    if (indexPath.section %2 == 0) {
        [cell setBackgroundColor:[UIColor blueColor]];

    }else {
        [cell setBackgroundColor:[UIColor greenColor]];

    }

    [cell.contentView addSubview:imageView];

    return cell;
}

#pragma mark - UICollectionViewDelegateFlowLayout
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
 NSLog(@&quot;%ld&quot;,indexPath.section % 2);

    if (indexPath.section % 2 == 0) {
        return CGSizeMake(50, 50);
    }
    return CGSizeMake(100, 100);
}
</code></pre><p>#问题解决过程：<br>根据<code>bad effect</code>显示的内容，可以推测：关键问题应该是view的重用我没做好。</p>
<p>##第一次分析:<br>认为问题时出现在这里，在每次<code>cell</code>出现在用户可见的区域时,<code>[cell.contentView addSubview:imageView];</code>便会在view上添加一个imageView，在每次<code>cell</code>消失在用户可见的区域时，我并没有imageView移除或者进行重用的操作。    </p>
<p>##第一次修改:重新正确利用官方的重用机制<br>代码如下:(为了描述方便，被注释的部位即为我修改的地方，)<br><em>同时我也对storyboard中的cell做了修改，其他没列出来的就表示没有被窝修改</em><br><img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_inStoryboard.png" alt="cell_inStoryboard"></p>
<pre><code>- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@&quot;testCell&quot; forIndexPath:indexPath];

    // _image = [UIImage imageNamed:@&quot;yes&quot;];

    // UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(cell.frame.size.width/4, cell.frame.size.height/4, cell.frame.size.width/2, cell.frame.size.height/2)];

    // [imageView setImage:_image];

    if (indexPath.section %2 == 0) {
        [cell setBackgroundColor:[UIColor blueColor]];

    }else {
        [cell setBackgroundColor:[UIColor greenColor]];

    }

    // [cell.contentView addSubview:imageView];

    return cell;
}
</code></pre><h2 id="第一次修改后的结果"><a href="#第一次修改后的结果" class="headerlink" title="第一次修改后的结果:"></a>第一次修改后的结果:</h2><p> <img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_first_modify.png" alt="cell_first_modify"><br> 这时候居然没东西，空的。    </p>
<h2 id="第二次分析"><a href="#第二次分析" class="headerlink" title="第二次分析:"></a>第二次分析:</h2><p>然后我就去看<a href="https://developer.apple.com/library/prerelease/tvos/documentation/UIKit/Reference/UICollectionView_class/" target="_blank" rel="noopener">官方文档</a><br> 里面有这么一段:<code>Before you call either of these methods, you must tell the collection view how to create the corresponding view if one does not already exist. For this, you must register either a class or a nib file with the collection view. For example, when registering cells, you use the registerClass:forCellWithReuseIdentifier: or registerNib:forCellWithReuseIdentifier: method. As part of the registration process, you specify the reuse identifier that identifies the purpose of the view. This is the same string you use when dequeueing the view later.</code></p>
<p> 我马上去看我的代码，确实也有这句关键的代码。<code>registerClass:forCellWithReuseIdentifier:</code><br> 问题应该就出现在这句上面，这里一定有我没掌握好或者说是错误理解的关键性知识点。<br> 于是我搜索关键字:<code>forCellWithReuseIdentifier</code><br> 在<a href="http://stackoverflow.com" target="_blank" rel="noopener">SOF</a>上找到了下面的<a href="http://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-uicolle" target="_blank" rel="noopener">解答</a>.<br> 从提问者的描述中:<br> <code>I get a black collection view. When I delete it everything works fine.</code>    </p>
<h2 id="第二次修改代码"><a href="#第二次修改代码" class="headerlink" title="第二次修改代码:"></a>第二次修改代码:</h2><p> 我们知道这个人遇到的是和我们一样的问题，于是我也把下面这段代码注释了。</p>
<pre><code>//[self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;testCell&quot;];
</code></pre><h2 id="第一次修改后的结果-1"><a href="#第一次修改后的结果-1" class="headerlink" title="第一次修改后的结果:"></a>第一次修改后的结果:</h2><p><img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-cell_need_effect.png" alt="cell_need_effect"></p>
<p>居然显示正确了。<br>秉着稣的教诲，知其然还需知其所以然。</p>
<p>#尝试分析问题原因:<br>在第一次修改代码前，之所以能显示图片是我直接在cell上添加了图片。并没有重用可言。<br>在第一次修改代码后，之所以不能显示图片，是我用过<code>[self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@&quot;testCell&quot;];</code>注册了一个重用的cell类，但在实际执行的过程中即：在<code>cellForItemAtIndexPath</code>中的<code>UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@&quot;testCell&quot; forIndexPath:indexPath];</code>cell并非我之前注册的东西(并不是同一个，是让identifier是一样的).</p>
<p>#尝试利用实验来证明自己的分析:</p>
<p>我马上写了2个自定义的<code>CollectionViewCell</code>并做了如下的修改    </p>
<pre><code>[self.collectionView registerClass:[TestCollectionViewCell class] forCellWithReuseIdentifier:@&quot;testCell&quot;];

imageCollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@&quot;testCell&quot; forIndexPath:indexPath];
</code></pre><p><img src="http://mrchens.github.io/images/article/2015.09/2015-09-11-different_cell_class.png" alt="different_cell_class"><br>从图中可以看到,虽然我<code>imageCollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@&quot;testCell&quot; forIndexPath:indexPath];</code>是赋值给imageCollectionViewCell类型的变量cell但它实际是registerClass的<code>TestCollectionViewCell</code>。从而说明这2个不是同一个东西.</p>
<p>为了检验自己的想法是不是对的，我们来看看之前的在<a href="http://stackoverflow.com" target="_blank" rel="noopener">SOF</a>上找到的<a href="http://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-uicolle" target="_blank" rel="noopener">解答</a>.<br> 从回答者的描述中，</p>
<p><code>If you&#39;ve already created your UICollectionView in Storyboard, connected your dataSource and delegate, and you have added all of the required methods:</code></p>
<ul>
<li><code>numberOfItemsInSection</code></li>
<li><code>numberOfSectionsInCollectionView (not a required method -</code><a href="http://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-uicolle/12884938#comment23861991_12884938]" target="_blank" rel="noopener">refer to this comment</a><code>)</code></li>
<li><p><code>cellForItemAtIndexPath</code></p>
<p>  <code>Then the registerClass / registerCell method isn&#39;t required. However, if you need to reuse a view, data, or cells then you should use those methods so that iOS can populate your UICollectionView as needed. This can also be done in your Storyboard by setting the Prototype Cell (the same principal as the registerClass method.</code></p>
<p> <code>Also, if you&#39;re looking for a good explanation on what registerCell does and how to use it check out</code><a href="http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout" target="_blank" rel="noopener">this link</a> <code>and scroll to the bottom section titled &quot;Cell and View Reuse.&quot;</code></p>
</li>
</ul>
<p>我们可以知道使用storyboard的话(做完必要的配置)的效果就相当于已经写了<code>registerClass</code>方法。</p>
<p>从他们的讨论中</p>
<p>   <code>Thanks @RazorSharp. However, would just like to point out numberOfSectionsInCollectionView: is not a &#39;required method&#39;. As per</code><a href="http://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewDataSource_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012175-CH1-SW5" target="_blank" rel="noopener">Apple Documentation</a><code>, If you do not implement this method, the collection view uses a default value of 1. –  So Over It May 17 &#39;13 at 2:38</code></p>
<p><code>@SoOverIt Good point! I had forgotten that, please check out my edit. –  Sam May 18 &#39;13 at 1:19</code></p>
<p><code>The main point is that you can connect a prototype cell directly in a storyboard, which fulfills the same role as calling registerClass:.... Memory usage or cell reuse don&#39;t really have anything to do with this. A collection view never loads cells into memory that aren&#39;t on screen, and if the cell identifier wasn&#39;t actually registered, the line where he dequeues a cell would crash. –  omz May 18 &#39;13 at 1:39</code></p>
<p><code>Perfect Answer!! save lots of my time Thank you SAM!! –  Nitya Dec 10 &#39;13 at 10:48</code></p>
<p><code>Agree with</code><a href="http://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-my-coll/12884938#12884938" target="_blank" rel="noopener">RazorSharp’s</a><code>answer and wanted to point out that that key phrase for me in the</code><a href="http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout" target="_blank" rel="noopener">Techtopia link</a><code>is:</code></p>
<p><code>If the cell class was written in code, the registration is performed using the registerClass: method of UICollectionView, otherwise use registerNib</code></p>
<p>如果这个cell类是用代码写，那么这个<code>registerClass</code>那么就会用registerClass否则就是用registeNIB。意思就是如果你用storyboard写，然后又在代码中用了<code>registerClass</code>cell的重用就会是代码的cell类的而不是storyboard的cell类。</p>
<p>那么现在我们来<a href="http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout" target="_blank" rel="noopener">this link</a>看看registerClass到底做了些什么？以及cell的重用是怎么一回事。</p>
<p>   没有全部看完，就挑了Cell and View Reuse这段来看。<br>   registerClass就是用来注册cell到重用queue中，当每次请求cell的时候就会从queue中查找是否有已经注册好的cell可以使用，如果有则取出来重新利用，如果没有则创建一个新。解释的还不是很清楚，下次补上。</p>
<p>#遗留的问题<br>为什么使用代码自定义一个cell是使用下面这种方式来创建:</p>
<pre><code>@interface imageCollectionViewCell : UICollectionViewCell

@property (nonatomic, weak) UIImageView *imageView;

@end   

#import &quot;imageCollectionViewCell.h&quot;

@implementation imageCollectionViewCell

- (instancetype)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 25, 25)];
    [imageView setImage:[UIImage imageNamed:@&quot;first&quot;]];

    [self.contentView addSubview:imageView];

    self.imageView = imageView;
}
return self;
}

@end
</code></pre><p><code>@property (nonatomic, weak) UIImageView *imageView;</code>    </p>
<p>为什么还要写下面的代码以后在table中<code>[cell.imageView setImage:[UIImage imageNamed:@&quot;yes&quot;]];</code>才能正常显示所需要的图片呢？</p>
<p> <code>self.imageView = imageView;</code></p>
<p> 下面是对遗留问题的解释：</p>
<pre><code>@implementation imageCollectionViewCell

- (instancetype)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    // 为imageView设置初始图片
    UIImageView *defaultImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 25, 25)];
    [defaultImageView setImage:[UIImage imageNamed:@&quot;first&quot;]];

    [self.contentView addSubview:defaultImageView];
    // 为了初始化self.imageView防止为nil
    self.imageView = defaultImageView;
}
return self;
}
</code></pre>
      
    </div>

    

    
    
    

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/wechat_qrcode.jpg" alt="DeafChen wechat" style="width: 200px; max-width: 100%;"/>
    <div>扫码关注一个很懒的程序员!</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Winter is coming, give me a penny!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat_reward.JPG" alt="DeafChen WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay_reward.jpg" alt="DeafChen Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>DeafChen</li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/" title="关于collectionViewCell的重用">https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</li>
</ul>

      </div>
    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/08/29/view-debugging-in-xcode6/" rel="next" title="翻译：使用Xcode6的视图调试">
                <i class="fa fa-chevron-left"></i> 翻译：使用Xcode6的视图调试
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/12/06/about-collectionviewlayout/" rel="prev" title="关于collectionView的布局">
                关于collectionView的布局 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="DeafChen" />
            
              <p class="site-author-name" itemprop="name">DeafChen</p>
              <p class="site-description motion-element" itemprop="description">It’s amazing how the unexpected, can take your life and change directions.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">34</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/MrChens" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/LableTag" target="_blank" title="Twitter" rel="external nofollow"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://weibo.com/325751212" target="_blank" title="Weibo" rel="external nofollow"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次修改后的结果"><span class="nav-number">1.</span> <span class="nav-text">第一次修改后的结果:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次分析"><span class="nav-number">2.</span> <span class="nav-text">第二次分析:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二次修改代码"><span class="nav-number">3.</span> <span class="nav-text">第二次修改代码:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第一次修改后的结果-1"><span class="nav-number">4.</span> <span class="nav-text">第一次修改后的结果:</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DeafChen</span>

  

  
</div>


  



  <div class="powered-by">Powered by <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Gemini</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  

  
    <script id="dsq-count-scr" src="https://mrchens.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://mrchens.github.io/2015/09/11/about-the-collectionviewcell-and-view-reuse/';
        this.page.identifier = '2015/09/11/about-the-collectionviewcell-and-view-reuse/';
        this.page.title = '关于collectionViewCell的重用';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://mrchens.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Rbmck7R3KAm9W7niGDdiqynV-gzGzoHsz", "vkjMmth4lwiUrDQ7gMeA9MkM");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var newcounter = new Counter();
              /* Set ACL */
              var acl = new AV.ACL();
              acl.setPublicReadAccess(true);
              acl.setPublicWriteAccess(true);
              newcounter.setACL(acl);
              /* End Set ACL */
              newcounter.set("title", title);
              newcounter.set("url", url);
              newcounter.set("time", 1);
              newcounter.save(null, {
                success: function(newcounter) {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
                },
                error: function(newcounter, error) {
                  console.log('Failed to create');
                }
              });
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  

  

  

  

  

  

</body>
</html>
